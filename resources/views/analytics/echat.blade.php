<link href="/vendor/laravel-admin/analytic/pace-theme-flash.css?version=2015" rel="stylesheet" type="text/css"
      media="screen"/>
<link href="/vendor/laravel-admin/analytic/bootstrap-theme.min.css?version=2015" rel="stylesheet" type="text/css"/>
<link href="/vendor/laravel-admin/analytic/custom.css?version=2015" rel="stylesheet" type="text/css"/>
{{--<link rel="stylesheet" href="/vendor/laravel-admin/analytic/sweet-alert.css?version=2015" type="text/css">--}}
<link href="/vendor/laravel-admin/analytic/datepicker.css?version=2015" rel="stylesheet" type="text/css"/>
<link href="/vendor/laravel-admin/analytic/jquery.dataTables.css?version=2015" rel="stylesheet" type="text/css"/>
<link href="/vendor/laravel-admin/analytic/datatables.responsive.css?version=2015" rel="stylesheet" type="text/css"
      media="screen"/>
<script src="/vendor/laravel-admin/analytic/bootstrap-datepicker.js?version=2015" type="text/javascript"></script>

<link href="/vendor/laravel-admin/analytic/select2.css?version=2015" rel="stylesheet" type="text/css" media="screen"/>
<script src="/vendor/laravel-admin/analytic/echarts.min.js"></script>

<link href="/vendor/laravel-admin/analytic/font-awesome.css?version=2015" rel="stylesheet" type="text/css"/>
<link href="/vendor/laravel-admin/analytic/animate.min.css?version=2015" rel="stylesheet" type="text/css"/>
<link href="/vendor/laravel-admin/analytic/jquery.scrollbar.css?version=2015" rel="stylesheet" type="text/css"/>

{{--<link rel="stylesheet" href="/vendor/laravel-admin/analytic/rickshaw.css?version=2015" type="text/css" media="screen">--}}
{{--<link rel="stylesheet" href="/vendor/laravel-admin/analytic/mapplic.css?version=2015" type="text/css" media="screen">--}}
{{--<link rel="stylesheet" href="/vendor/laravel-admin/analytic/ionicons.css?version=2015" type="text/css">--}}
{{--<link href="/vendor/laravel-admin/analytic/messenger.css?version=2015" rel="stylesheet" type="text/css" media="screen"/>--}}
{{--<link href="/vendor/laravel-admin/analytic/messenger-theme-flat.css?version=2015" rel="stylesheet" type="text/css" media="screen"/>--}}
{{--<link href="/vendor/laravel-admin/analytic/jquery-jvectormap-1.2.2.css?v=0.1" rel="stylesheet" type="text/css"  media="screen"/>--}}

{{--引用后点击页面会刷新,展示区域样式--}}
{{--<link href="/vendor/laravel-admin/analytic/webarch.css?v=0.3" rel="stylesheet" type="text/css"/>--}}


{{--<link rel="stylesheet" href="/vendor/laravel-admin/analytic/links_img.css?version=2015">--}}
{{--<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js?version=2015"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/jqueryblockui.min.js?version=2015" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/jquery.unveil.min.js?version=2015" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/jquery.scrollbar.min.js?version=2015" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/jquery.animateNumbers.js?version=2015" type="text/javascript"></script>--}}
<script src="/vendor/laravel-admin/analytic/jquery.validate.min.js?version=2015" type="text/javascript"></script>
<script src="/vendor/laravel-admin/analytic/select2.js?version=2015" type="text/javascript"></script>
<script src="/vendor/laravel-admin/analytic/bootstrap-timepicker.min.js?version=2015" type="text/javascript"></script>

<link rel="stylesheet" href="/vendor/laravel-admin/analytic/bootstrap-select.min.css">
<script src="/vendor/laravel-admin/analytic/bootstrap-select.min.js"></script>


<script src="/vendor/laravel-admin/analytic/form_elements.js?version=2015" type="text/javascript"></script>
{{--<script src="/vendor/laravel-admin/analytic/sweet-alert.min.js?version=2015"></script>--}}
<script src="/vendor/laravel-admin/analytic/clipboard.js?version=2015"></script>
<script src="/vendor/laravel-admin/analytic/messenger.min.js?version=2015" type="text/javascript"></script>
{{--<link href="/vendor/laravel-admin/analytic/bootstrap.min.css" rel="stylesheet" type="text/css" />  引用后点击页面会刷新 --}}


{{--<link rel="stylesheet" type="text/css" href="/vendor/laravel-admin/analytic/demo.css"/>  调整搜索框样式，暂时拿掉--}}
{{--<link href="/vendor/laravel-admin/analytic/font-awesome.css?version=2015" rel="stylesheet" type="text/css"/>--}}

{{--<link rel="icon" type="image/png" href="/vendor/laravel-admin/analytic/favicon.png">--}}
{{--<link href="/vendor/laravel-admin/analytic/jquery-jvectormap-1.2.2.css?v=0.1" rel="stylesheet" type="text/css" media="screen"/>--}}


{{--<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">--}}
{{--<script src="/vendor/laravel-admin/analytic/pace.min.js" type="text/javascript"></script>--}}


{{--<script src="/vendor/laravel-admin/analytic/jquery-2.1.4.js"></script>--}}
{{--<script src="assets/plugins/bootstrapv3/js/bootstrap.min.js" type="text/javascript"></script>--}}


{{--<script src="/vendor/laravel-admin/analytic/bootstrap.js" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/bootstrap-popover-custom-class.min.js" type="text/javascript"></script>--}}


{{--<script src="/vendor/laravel-admin/analytic/webarch.js?version=2015" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/chat.js" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/ckeditor.js?v=0.1" type="text/javascript"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/config.js?v=0.1" type="text/javascript"></script>--}}


{{--<link href="/vendor/laravel-admin/analytic/lity.css?version=2015" rel="stylesheet">--}}
{{--<script src="/vendor/laravel-admin/analytic/lity.js?version=2015"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/jquery.cookie.js"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/main.js?v=0.6"></script>--}}
{{--<script type="text/javascript" src="/vendor/laravel-admin/analytic/notifications.js?v=0.4"></script>--}}
{{--<script type="text/javascript" src="/vendor/laravel-admin/analytic/email-broadcast.js?v=0.1"></script>--}}


{{--<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>--}}
{{--<script src="//cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>--}}
{{--<script src="/vendor/laravel-admin/analytic/Chart.min.js"></script>--}}


<a href="#" class="scrollup">Scroll</a>

<!-- END SIDEBAR -->
<!-- BEGIN PAGE CONTAINER-->
<div class="page-content">
    <div class="content">


        <input type="hidden" id="_token" name="_token" value="{{ csrf_token() }}"/>
        <div class="form-group">
            <div class="col-sm-4" style="width: 18%!important;">
                <select id="offer" name="usertype" class="selectpicker show-tick form-control" multiple
                        data-max-options="3"
                        data-live-search="true" data-none-selected-text="Select Offers">
                    @foreach ($offer_list as $key=>$item)
                        <option value="{{$item['id']}}"
                                data-content="<span class='label label-success'> {{$item['offer_name']}}</span>">
                            {{$item['offer_name']}}
                        </option>
                    @endforeach
                </select>
            </div>


            <div class="col-sm-4" style="width: 18%!important;">
                <select id="geos" name="usertype" class="selectpicker show-tick form-control" multiple
                        data-max-options="3"
                        data-live-search="true" data-none-selected-text="Select Offers Geos">
                    @foreach ($geos_list as $key=>$item)
                        <option value="{{$item['id']}}"
                                data-content="<span class='label label-success'> {{$item['country']}}</span>">
                            {{$item['country']}}
                        </option>
                    @endforeach
                </select>
            </div>
            <div class='col-sm-4' style="width: 18%!important;">
                <div class="form-group">
                    <div class='input-group date' id='datetimepicker6'>
                        <input type='text' class="form-control" id="datetimepicker5"/>
                        <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
            </span>
                    </div>
                </div>
            </div>

            <div class='col-sm-4' style="width: 18%!important;">
                <div class="form-group">
                    <div class='input-group date' id='datetimepicker7'>
                        <input type='text' class="form-control" id="datetimepicker8"/>
                        <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
            </span>
                    </div>
                </div>
            </div>

            <div class="row">
                {{--                <div class="col-sm-4" style="width: 18%!important;">--}}
                {{--                    <input type="text" class="form-control" id="keyword" value="" placeholder="搜索...">--}}
                {{--                    <p id="keyword1"></p>--}}
                {{--                </div>--}}
                <button id="searchBtn" class="btn btn-primary">搜索</button>
            </div>
        </div>


        <div class="col-md-12">
            <div class="row">
                <div class="grid simple">
                    <div class="grid-title no-border">
                        <div class="col-xs-12">
                            <div class="row">
                                {{--                                <div class="col-xs-12 col-md-6 col-lg-2_min_col_lg_1 use_small_padding">--}}
                                {{--                                    <div class="timezone">--}}
                                {{--                                        <select class="select_timezone">--}}
                                {{--                                            <option timeZoneId="1" gmtAdjustment="GMT-12:00" useDaylightTime="0"--}}
                                {{--                                                    data-val="-12" value="1">(GMT-12:00) International Date Line West--}}
                                {{--                                            </option>--}}
                                {{--                                            <option timeZoneId="2" gmtAdjustment="GMT-11:00" useDaylightTime="0"--}}
                                {{--                                                    data-val="-11" value="2">(GMT-11:00) Midway Island, Samoa--}}
                                {{--                                            </option>--}}
                                {{--                                        </select>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                                {{--                                <div class="col-xs-12 col-md-6 col-lg-2_min_col_lg_1 use_small_padding">--}}
                                {{--                                    <div class="row">--}}
                                {{--                                        <div class="col-xs-12">--}}
                                {{--                                            <select class="list_date select2_list padding_left" name="date" id="">--}}
                                {{--                                                <option value="today">Today</option>--}}
                                {{--                                                <option value="yester">Yesterday</option>--}}
                                {{--                                                <option value="week">Current Week</option>--}}
                                {{--                                                <option value="month">Current Month</option>--}}
                                {{--                                                <option value="year">Year To Date</option>--}}
                                {{--                                                <option value="l_week">Last Week</option>--}}
                                {{--                                                <option value="l_month">Last Month</option>--}}
                                {{--                                                <option value="calendar">Custom</option>--}}
                                {{--                                            </select>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                                {{--                                <div--}}
                                {{--                                    class="col-xs-12 col-md-6 col-lg-2_min_col_lg_1 use_small_padding calendar_padding">--}}
                                {{--                                    <div class="col-xs-4 col-sm-4">--}}
                                {{--                                        <div class="row">--}}
                                {{--                                            <div class="about_color">--}}
                                {{--                                                <p class="about_inputs">Start</p>--}}
                                {{--                                            </div>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                    <div class="input-append success col-xs-8 col-sm-8">--}}
                                {{--                                        <div class="row">--}}
                                {{--                                            <input type="text"--}}
                                {{--                                                   class="form-control date_start date_pic_wid sandbox-advance">--}}
                                {{--                                            <span class="add-on"><span class="arrow"></span><i--}}
                                {{--                                                    class="fa fa-th"></i></span>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                                {{--                                <div--}}
                                {{--                                    class="col-xs-12 col-md-6 col-lg-2_min_col_lg_1 use_small_padding calendar_padding">--}}
                                {{--                                    <div class="col-xs-4 col-sm-4">--}}
                                {{--                                        <div class="row">--}}
                                {{--                                            <div class="about_color">--}}
                                {{--                                                <p class="about_inputs">End</p>--}}
                                {{--                                            </div>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                    <div class="input-append success col-xs-8 col-sm-8">--}}
                                {{--                                        <div class="row">--}}
                                {{--                                            <input type="text"--}}
                                {{--                                                   class="form-control date_end date_pic_wid sandbox-advance">--}}
                                {{--                                            <span class="add-on"><span class="arrow"></span><i--}}
                                {{--                                                    class="fa fa-th"></i></span>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                                {{--                                <div class="col-xs-12 col-md-6 col-lg-2_min_col_lg_1">--}}
                                {{--                                    <div class="row">--}}
                                {{--                                        <div class="col-xs-12 use_small_padding">--}}
                                {{--                                            <select class="select2_offers" name="offers" id="offers"--}}
                                {{--                                                    multiple="multiple">--}}
                                {{--                                                <option value="DroneX">Ecommerce - DroneX INTL - All Languages ---}}
                                {{--                                                    EXCLUSIVE--}}
                                {{--                                                </option>--}}
                                {{--                                                <option value="Tactical Flashlight">Ecommerce - TacticalX Flashlight--}}
                                {{--                                                    INTL - All Languages - EXCLUSIVE--}}
                                {{--                                                </option>--}}
                                {{--                                            </select>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                                {{--                                <div class="col-xs-12 col-md-6 col-lg-2_min_col_lg_1">--}}
                                {{--                                    <div class="row">--}}
                                {{--                                        <div class="col-xs-12 use_small_padding">--}}
                                {{--                                            <select class="select2_geos" name="offer_geos" id="geos" multiple>--}}
                                {{--                                                <option value="Albania">Albania</option>--}}
                                {{--                                                <option value="Algeria">Algeria</option>--}}
                                {{--                                                <option value="Andorra">Andorra</option>--}}
                                {{--                                                <option value="Angola">Angola</option>--}}
                                {{--                                            </select>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                                {{--                                <div class="col-xs-12 col-md-12 col-lg-1">--}}
                                {{--                                    <div class="row">--}}
                                {{--                                        <div class="col-xs-12 use_small_padding">--}}
                                {{--                                            <form id="report">--}}
                                {{--                                                <div>--}}
                                {{--                                                    <button class="btn btn-success btn-cons button_top" type="submit">--}}
                                {{--                                                        Report--}}
                                {{--                                                    </button>--}}
                                {{--                                                </div>--}}
                                {{--                                            </form>--}}
                                {{--                                        </div>--}}
                                {{--                                    </div>--}}
                                {{--                                </div>--}}
                            </div>
                        </div>

                        <div class="row">
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="row">
                        <div class="grid simple">
                            <div class="all_clients grid-body no-border" style="overflow-x: hidden;">
                                <h3>Performance <span class="semi-bold night_blue">Evolution</span></h3>
                                <p>Visualize the trends of your Revenue & Conversions over the selected period of
                                    time.</p>
                                <br>


                                <div id="placeholder" class="demo-placeholder"
                                     style="width:95%;height:270px; padding-right: 76px;">
                                    <canvas id="myLineChart" style="width: 484px;height:250px;"></canvas>
                                </div>


                                <div class="row">
                                    {{--                                        <div class="col-md-6">--}}
                                    {{--                                            <div class="mini-chart-wrapper">--}}
                                    {{--                                                <div class="chart-details-wrapper">--}}
                                    {{--                                                    <div class="chartname"> Conversions </div>--}}
                                    {{--                                                    <div class="chart-value conversions"> 0 </div>--}}
                                    {{--                                                </div>--}}
                                    {{--                                                <div class="mini-chart">--}}
                                    {{--                                                    <div id="mini-chart-orders"></div>--}}
                                    {{--                                                </div>--}}
                                    {{--                                            </div>--}}
                                    {{--                                        </div>--}}
                                    {{--                                        <div class="col-md-6">--}}
                                    {{--                                            <div class="mini-chart-wrapper">--}}
                                    {{--                                                <div class="chart-details-wrapper">--}}
                                    {{--                                                    <div class="chartname"> Revenue </div>--}}
                                    {{--                                                    <div class="chart-value revenue"> 0 </div>--}}
                                    {{--                                                </div>--}}
                                    {{--                                                <div class="mini-chart">--}}
                                    {{--                                                    <div id="mini-chart-other"></div>--}}
                                    {{--                                                </div>--}}
                                    {{--                                            </div>--}}
                                    {{--                                        </div>--}}
                                </div>
                                <span class="graph-btns" style="width: 150px;margin-right: 280px;margin-top: 50px">
                                <select class="form-control" id="updateChart">
                                    <option value="1">revenue</option>
                                    <option value="2">Conversion</option>
                                </select>
                                </span>

                                {{--                                <span class="graph-btns">--}}
                                {{--										<div class="btn-group graph-selector">--}}
                                {{--										<button class="btn btn-mini btn-success hidden"--}}
                                {{--                                                data-analytics-performance-active="revenue">Revenue</button>--}}
                                {{--										<button class="btn btn-mini btn-success"--}}
                                {{--                                                data-analytics-performance-active="conversion">Conversion</button>--}}
                                {{--										<button class="btn btn-mini btn-success dropdown-toggle m-b-5"--}}
                                {{--                                                data-toggle="dropdown"> <span class="caret"></span> </button>--}}
                                {{--										<ul class="dropdown-menu dropdown-menu-right">--}}
                                {{--											<li><a href="javascript:void(0);" data-analytics-performance="revenue">Revenue</a></li>--}}
                                {{--											<li><a href="javascript:void(0);" data-analytics-performance="conversion">Conversion</a></li>--}}
                                {{--										</ul>--}}
                                {{--									</div>--}}
                                {{--                                </span>--}}


                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="grid simple">
                                <div class="grid-body no-border">
                                    <h4>Revenue <span class="semi-bold night_blue">Segmentation</span></h4>
                                    <p>Visualize your Revenue segmented by Offer over the selected period of time.</p>
                                    {{--                                    <div id="donut-example" style="height:270px;width: 50%">--}}
                                    {{--                                        <canvas id="myPieChart" style="width: 484px;height:233px;"></canvas>--}}


                                    <div id="stacked-ordered-chart" style="height:270px;" data-page-length="10"
                                         data-bar-width="0.5" data-page="1">


                                        {{--                            <span class="graph-btns" style="width: 150px;margin-right: 30px;margin-top: 50px">--}}
                                        <select class="form-control" id="updatePie"
                                                style="width: 20%;margin-left: 560px">
                                            <option value="1">Conversion</option>
                                            <option value="2">revenue</option>
                                            <option value="3">Percent</option>
                                        </select>
                                        {{--                                </span>--}}


                                        <div id="myPieChart" style="width: 80%; height: 230px;"></div>
                                        {{--                                        </div>--}}



                                        {{--                                        <div--}}
                                        {{--                                            style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">--}}
                                        {{--                                            <span id="centerText"--}}
                                        {{--                                                  style="font-size: 26px; font-weight: bold;color: black">BarXStop</span>--}}
                                        {{--                                        </div>--}}
                                        {{--                                        <div--}}
                                        {{--                                            style="position: absolute; top: 56%; left: 50%; transform: translate(-50%, -50%); text-align: center;">--}}
                                        {{--                                            <span id="centerTextCount"--}}
                                        {{--                                                  style="font-size: 22px; font-weight: bold;color: black">{{$percent}}%</span>--}}
                                        {{--                                        </div>--}}
                                    </div>


                                    {{--                                                                            <div id="placeholder" class="demo-placeholder" style="width:95%;height:250px; padding-right: 76px;">--}}
                                    {{--                                                                                <canvas id="myPieChart" style="width: 484px;height:233px;"></canvas>--}}
                                    {{--                                                                            </div>--}}
                                    {{--                                                                            <span class="graph-btns">--}}
                                    {{--                                    											<div class="btn-group graph-selector hidden">--}}
                                    {{--                                    											<button class="btn btn-mini btn-success hidden" data-analytics-revenue-active="revenue">Revenue</button>--}}
                                    {{--                                    											<button class="btn btn-mini btn-success hidden" data-analytics-revenue-active="conversion">Conversion</button>--}}
                                    {{--                                    											<button class="btn btn-mini btn-success hidden" data-analytics-revenue-active="percent">Percent</button>--}}
                                    {{--                                    											<button class="btn btn-mini btn-success dropdown-toggle m-b-5" data-toggle="dropdown"> <span class="caret"></span> </button>--}}
                                    {{--                                    											<ul class="dropdown-menu dropdown-menu-right">--}}
                                    {{--                                    												<li><a href="javascript:void(0);" data-analytics-revenue="revenue">Revenue</a></li>--}}
                                    {{--                                    												<li><a href="javascript:void(0);" data-analytics-revenue="conversion">Conversion</a></li>--}}
                                    {{--                                    												<li><a href="javascript:void(0);" data-analytics-revenue="percent">Percent</a></li>--}}
                                    {{--                                    											</ul>--}}
                                    {{--                                    										</div>--}}
                                    {{--                                    										</span>--}}

                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="grid simple">
                                <div class="grid-body no-border">
                                    <div class="row-fluid">
                                        <h4>Offer Geo <span class="semi-bold night_blue">Distribution</span></h4>
                                        <p>Visualize your Offers Revenue segmented by Country over the selected period
                                            of time.</p>

                                        {{--                            <span class="graph-btns" style="width: 150px;margin-right: 30px;margin-top: 50px">--}}

                                        <br>
                                        {{--                                </span>--}}


                                        <div id="stacked-ordered-chart" style="height:300px;width: 80%" data-page-length="10"
                                             data-bar-width="0.5" data-page="1">
                                            <select class="form-control" id="updateBar"
                                                    style="width: 20%;margin-left: 460px">
                                                <option value="1">Conversion</option>
                                                <option value="2">revenue</option>
                                                <option value="3">Percent</option>
                                            </select>
{{--                                            <canvas id="myBarChart" style="width: 484px;height:270px;"></canvas>--}}

                                            <div id="myBarChart" style="height: 270px;"></div>
                                        </div>


{{--                                        <span class="graph-btns">--}}
{{--                                        	<div class="btn-group graph-selector hidden">--}}
{{--                                        		<button class="btn btn-mini btn-success hidden"--}}
{{--                                                        data-analytics-geo-active="revenue">Revenue</button>--}}
{{--                                        			<button class="btn btn-mini btn-success hidden"--}}
{{--                                                            data-analytics-geo-active="conversion">Conversion</button>--}}
{{--                                        				<button class="btn btn-mini btn-success hidden"--}}
{{--                                                                data-analytics-geo-active="percent">Percent</button>--}}
{{--                                        					<button--}}
{{--                                                                class="btn btn-mini btn-success dropdown-toggle m-b-5"--}}
{{--                                                                data-toggle="dropdown">--}}
{{--                                                                <span class="caret"></span>--}}
{{--                                                            </button>--}}
{{--                                        					<ul class="dropdown-menu dropdown-menu-right">--}}
{{--                                                                <li><a href="javascript:void(0);"--}}
{{--                                                                       data-analytics-geo="revenue">Revenue</a></li>--}}
{{--                                        						<li><a href="javascript:void(0);"--}}
{{--                                                                       data-analytics-geo="conversion">Conversion</a></li>--}}
{{--                                        						<li><a href="javascript:void(0);"--}}
{{--                                                                       data-analytics-geo="percent">Percent</a></li>--}}
{{--                                        					</ul>--}}
{{--                                        				</div>--}}
{{--                                        			<div class="btn-group graph-paginator hidden m-l-10"--}}
{{--                                                         data-target="stacked-ordered-chart">--}}
{{--                                        				<button class="btn btn-white graph-prev hidden m-b-5"--}}
{{--                                                                type="button">--}}
{{--                                                            <i class="fa fa-chevron-left"></i></button>--}}
{{--                                        						<button class="btn btn-white graph-next m-b-5"--}}
{{--                                                                        type="button">--}}
{{--                                                                    <i class="fa fa-chevron-right"></i> </button>--}}
{{--                                        			 </div>--}}
{{--                                        		</span>--}}

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-sm-12">
                    <div class="row">
                        <div class="grid simple">
                            <div class="all_clients grid-body no-border">
                                <table class="show_result table table-striped table-flip-scroll cf" id="example2">

                                    <table class="table no-more-tables offer_table">
                                        <thead>
                                        <tr>
                                            <th style="width:20%" class="text-center">DATE</th>
                                            <th style="width:20%" class="text-center">OFFER</th>
                                            <th style="width:20%" class="text-center">CONVERSIONS</th>
                                            <th style="width:20%" class="text-center">REVENUE</th>
                                            <th style="width:20%" class="text-center">PERCENT</th>

                                        </tr>
                                        </thead>
                                        <tbody id="html_data">
                                        @foreach ($offer_count as $key=>$item)
                                            <tr>
                                                <td class="text-center">2024</td>
                                                <td class="text-center">{{$item['offer_name']}}</td>
                                                <td class="text-center">{{$item['total_quantity']}}</td>
                                                <td class="text-center">${{$item['total_revenue']}}</td>
                                                <td class="text-center">{{$item['percent']}}%</td>

                                            </tr>
                                        @endforeach
                                        </tbody>
                                    </table>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        {{--        <script src="/vendor/laravel-admin/analytic/rickshaw.min.js"></script>--}}
        <script src="/vendor/laravel-admin/analytic/morris.min.js"></script>
        <script src="/vendor/laravel-admin/analytic/jquery.flot.js"></script>
        <script src="/vendor/laravel-admin/analytic/jquery.flot.animator.min.js"></script>
        <script src="/vendor/laravel-admin/analytic/jquery.flot.orderBars.js"></script>
        <script src="/vendor/laravel-admin/analytic/jquery-sparkline.js"></script>
        {{--        <script src="/vendor/laravel-admin/analytic/graphics.js"></script>--}}
        <script src="/vendor/laravel-admin/analytic/functions.js"></script>


        <script type="text/javascript">

            $(function () {
                $('#datetimepicker6').datetimepicker({
                    defaultDate: moment().subtract(30, 'days'),
                    format: 'YYYY-MM-DD',
                });
                $('#datetimepicker7').datetimepicker({
                    defaultDate: moment(),
                    format: 'YYYY-MM-DD',
                    useCurrent: true //Important! See issue #1075
                });
                $("#datetimepicker6").on("dp.change", function (e) {
                    $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
                });
                $("#datetimepicker7").on("dp.change", function (e) {
                    $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
                });
            })
        </script>

        <script>
            $(document).ready(function () {
                $(".select2_list").select2();
                $(".select2_list").val("week").trigger("change");
                $(".select_timezone").select2();
                $(".select_timezone").val("64").trigger("change");
            });
        </script>
        <style type="text/css">
            .DTTT_button_collection, .dataTables_length, .dataTables_filter {
                display: none;
            }
        </style>


        <script src="/vendor/laravel-admin/analytic/data_table.js?version=2015"></script>
        {{--        <script src="/vendor/laravel-admin/analytic/summary.js?version=2016"></script>--}}
        <script src="/vendor/laravel-admin/analytic/jquery.dataTables.min.js?version=2015"
                type="text/javascript"></script>
        <script src="/vendor/laravel-admin/analytic/dataTables.tableTools.min.js?version=2015"
                type="text/javascript"></script>
        <script type="text/javascript"
                src="/vendor/laravel-admin/analytic/datatables.responsive.js?version=2015"></script>
        <script type="text/javascript" src="/vendor/laravel-admin/analytic/lodash.min.js?version=2015"></script>
    </div>
</div>


<!-- END PAGE CONTAINER -->

<!-- Modal -->
<div class="modal fade" id="notification_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <br>
                <div class="cbp_tmicon primary animated bounceIn notification_modal_image">
                    <!-- Notification image-->
                </div>
                <div class="notification_modal_head_block">
                    <h4 id="notification_modal_Label" class="semi-bold text-info"></h4>
                    <p><span class="data_notification"></span> <span class="time_notification"></span></p>
                    <p class="m-10"></p>
                    <div class="container_notify">

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
{{--<script src="https://cdn.jsdelivr.net/npm/echarts@5.0.2/dist/echarts.min.js"></script>--}}

<script type="text/javascript">
    var frontendData = @json($data);

    $(function () {
        $('.selectpicker').selectpicker();
    });


    $(document).ready(function () {

        var data = frontendData.original.data;
        var ctx = document.getElementById('myLineChart').getContext('2d');
        var myBarChart = echarts.init(document.getElementById('myBarChart'));
        // 初始化 ECharts 实例
        var myChart = echarts.init(document.getElementById('myPieChart'));

        console.log('返回值查询', data.processedData);

        var pieData = data.processedData;
        var defaultLabel = '默认标签名\n默认值';
        // 图表配置
        var option = {
            series: [
                {
                    name: 'Access From',
                    type: 'pie',
                    radius: ['60%', '90%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: true,
                        formatter: '{b}: {c}',
                        position: 'center'
                    },
                    grid: {
                        x: 5,
                        y: 2.5,
                        x2: 3,
                        y2: 3.5,
                        containLabel: true, // 自适应大小
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: 40,
                            fontWeight: 'bold'
                        }
                    },
                    labelLine: {
                        show: false
                    },
                    data: pieData,

                }
            ],
        };
        // 使用配置项设置图表
        myChart.setOption(option);
        window.addEventListener('resize', function () {
            myChart.resize();
        });




        console.log('日志打印',data.sale_date)


        var myLineChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.sale_date,
                datasets: [{
                    data: data.total_sales,
                    backgroundColor: ['blue'],
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {
                    display: false,
                },
            },
        });


        $('#updateChart').on('change', function () {
            var _token = $('#_token').val();
            var offer = $('#offer').val();
            var geos = $('#geos').val();
            var start_date = $('#datetimepicker5').val();
            var end_date = $('#datetimepicker8').val();

            function updateChartData() {
                $.ajax({
                    type: 'POST',
                    url: '/admin/analytics/query',
                    data: {
                        offer: offer,
                        _token: _token,
                        geos: geos,
                        start_date: start_date,
                        end_date: end_date,
                    },
                    success: function (data) {
                        // 获取选择的类别
                        var selectedCategory = document.getElementById('updateChart').value;

                        if (selectedCategory === '1') {
                            myLineChart.data.datasets[0].data = data.offer_count.total_sales;
                        } else {
                            myLineChart.data.datasets[0].data = data.offer_count.total_count;
                        }
                        myLineChart.data.labels = data.offer_count.sale_date;
                        myLineChart.update();

                    }
                });
            }

            updateChartData();
        });


        $('#updatePie').on('change', function () {
            var _token = $('#_token').val();
            var offer = $('#offer').val();
            var geos = $('#geos').val();
            var start_date = $('#datetimepicker5').val();
            var end_date = $('#datetimepicker8').val();

            function updatePieData() {
                $.ajax({
                    type: 'POST',
                    url: '/admin/analytics/query',
                    data: {
                        offer: offer,
                        _token: _token,
                        geos: geos,
                        start_date: start_date,
                        end_date: end_date,
                    },
                    success: function (data) {

                        var selectedCategory = document.getElementById('updatePie').value;
                        var myChart = echarts.init(document.getElementById('myPieChart'));

                        if (selectedCategory === '2') {
                            var pieData = data.offer_top.processedRevenue;
                            var lable = '{b}:{c}';
                        } else if (selectedCategory === '3') {
                            var pieData = data.offer_top.processedRevenue;
                            var lable = '{b}:{d}%';
                        } else {
                            var pieData = data.offer_top.processedData;
                            var lable = '{b}:{c}';
                        }

                        // 图表配置
                        var option = {
                            series: [
                                {
                                    name: 'Access From',
                                    type: 'pie',
                                    radius: ['60%', '90%'],
                                    avoidLabelOverlap: false,
                                    label: {
                                        show: true,
                                        position: 'center',
                                        formatter: lable,
                                    },
                                    emphasis: {
                                        label: {
                                            show: true,
                                            fontSize: 40,
                                            fontWeight: 'bold'
                                        }
                                    },
                                    labelLine: {
                                        show: false
                                    },
                                    data: pieData
                                }
                            ],

                        };
                        // 使用配置项设置图表
                        myChart.setOption(option);
                    }
                });
            }
            updatePieData();
        });


        $('#updateBar').on('change', function () {
            var _token = $('#_token').val();
            var offer = $('#offer').val();
            var geos = $('#geos').val();
            var start_date = $('#datetimepicker5').val();
            var end_date = $('#datetimepicker8').val();

            function updateBarData() {
                $.ajax({
                    type: 'POST',
                    url: '/admin/analytics/query',
                    data: {
                        offer: offer,
                        _token: _token,
                        geos: geos,
                        start_date: start_date,
                        end_date: end_date,
                    },
                    success: function (data) {
                        // 获取选择的类别

                        var selectedCategory = document.getElementById('updateBar').value;

                        if (selectedCategory === '2') {
                            var barData = data.country.country_total_sales;
                        } else if (selectedCategory === '3') {
                            var barData = data.country.country_total_percent;
                        } else {
                            var barData = data.country.country_total_count;
                        }

                        var barOption = {
                            xAxis: {
                                type: 'category',
                                data: barData.map(item => item.name), // 使用自定义变量作为标签
                            },
                            yAxis: {
                                // type: 'value',
                                axisLine: {
                                    show: false
                                }
                            },
                            grid: {
                                x: 5,
                                y: 2.5,
                                x2: 3,
                                y2: 3.5,
                                containLabel: true, // 自适应大小
                            },
                            series: [{
                                data: barData.map(item => item.value),
                                type: 'bar',
                            }],
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'shadow'
                                },
                                formatter: function (params) {
                                    // 重新组织标签内容，包括明细数据
                                    var dataIndex = params[0].dataIndex;
                                    var label = barData[dataIndex].name;
                                    var value = params[0].value;
                                    var details = '<br>明细数据：<br>';
                                    details += barData[dataIndex].details.map(item => item.name + ': ' + item.value).join('<br>');
                                    return label + '<br>数据值: ' + value + details;
                                }
                            },
                        };

                        // 使用刚指定的配置项和数据显示图表。
                        myBarChart.setOption(barOption);


                    }
                });
            }

            updateBarData();
        })

        var barData = data.country_total_count;
        var barOption = {
            xAxis: {
                type: 'category',
                data: barData.map(item => item.name), // 使用自定义变量作为标签
            },
            yAxis: {
                type: 'value',
            },
            grid: {
                x: 5,
                y: 2.5,
                x2: 3,
                y2: 3.5,
                containLabel: true, // 自适应大小
            },
            series: [{
                data: barData.map(item => item.value),
                type: 'bar',
            }],

            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                },
                formatter: function (params) {
                    // 重新组织标签内容，包括明细数据
                    var dataIndex = params[0].dataIndex;
                    var label = barData[dataIndex].name;
                    var value = params[0].value;
                    var details = '<br>明细数据：<br>';
                    details += barData[dataIndex].details.map(item => item.name + ': ' + item.value).join('<br>');
                    return label + '<br>数据值: ' + value + details;
                }
            },
        };

        // 使用刚指定的配置项和数据显示图表。
        myBarChart.setOption(barOption);


        function generateRandomColors(numColors) {
            var colors = [];
            for (var i = 0; i < numColors; i++) {
                var r = Math.floor(Math.random() * 256);
                var g = Math.floor(Math.random() * 256);
                var b = Math.floor(Math.random() * 256);
                var alpha = Math.random().toFixed(2); // 控制透明度，可根据需求修改
                colors.push('rgba(' + r + ',' + g + ',' + b + ',' + alpha + ')');
            }
            return colors;
        }


        $('#searchBtn').click(function (e) {

            e.preventDefault();
            var _token = $('#_token').val();
            var offer = $('#offer').val();
            var geos = $('#geos').val();
            var start_date = $('#datetimepicker5').val();
            var end_date = $('#datetimepicker8').val();

            function updateOfferChartData() {

                $.ajax({
                    type: 'POST',
                    url: '/admin/analytics/query',
                    data: {
                        offer: offer,
                        _token: _token,
                        geos: geos,
                        start_date: start_date,
                        end_date: end_date,
                    },
                    success: function (data) {


                        var lineSelectedCategory = document.getElementById('updateChart').value;

                        if (lineSelectedCategory === '1') {
                            myLineChart.data.datasets[0].data = data.offer_count.total_sales;
                        } else {
                            myLineChart.data.datasets[0].data = data.offer_count.total_count;
                        }
                        myLineChart.data.labels = data.offer_count.sale_date;
                        myLineChart.update();

                        //刷新饼图数据
                        var PieSelectedCategory = document.getElementById('updatePie').value;
                        var myPieChart = echarts.init(document.getElementById('myPieChart'));

                        if (PieSelectedCategory === '2') {
                            var pieData = data.offer_top.processedRevenue;
                            var lable = '{b}:{c}';
                        } else if (PieSelectedCategory === '3') {
                            var pieData = data.offer_top.processedRevenue;
                            var lable = '{b}:{d}%';
                        } else {
                            var pieData = data.offer_top.processedData;
                            var lable = '{b}:{c}';
                        }


                        // 图表配置
                        var pieOption = {
                            series: [
                                {
                                    name: 'Access From',
                                    type: 'pie',
                                    radius: ['60%', '90%'],
                                    avoidLabelOverlap: false,
                                    label: {
                                        show: true,
                                        position: 'center',
                                        formatter: lable,
                                    },
                                    emphasis: {
                                        label: {
                                            show: true,
                                            fontSize: 40,
                                            fontWeight: 'bold'
                                        }
                                    },
                                    labelLine: {
                                        show: false
                                    },
                                    data: pieData
                                }
                            ],

                        };
                        // 使用配置项设置图表
                        myPieChart.setOption(pieOption);

                        var barSelectedCategory = document.getElementById('updateBar').value;

                        if (barSelectedCategory === '2') {
                            var barData = data.country.country_total_sales;
                        } else if (barSelectedCategory === '3') {
                            var barData = data.country.country_total_percent;
                        } else {
                            var barData = data.country.country_total_count;
                        }

                        var barOption = {
                            xAxis: {
                                type: 'category',
                                data: barData.map(item => item.name), // 使用自定义变量作为标签
                            },
                            yAxis: {
                                type: 'value',
                                axisLine: {
                                    show: false
                                }
                            },
                            grid: {
                                x: 5,
                                y: 2.5,
                                x2: 3,
                                y2: 3.5,
                                containLabel: true, // 自适应大小
                            },
                            series: [{
                                data: barData.map(item => item.value),
                                type: 'bar',
                            }],
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'shadow'
                                },
                                formatter: function (params) {
                                    // 重新组织标签内容，包括明细数据
                                    var dataIndex = params[0].dataIndex;
                                    var label = barData[dataIndex].name;
                                    var value = params[0].value;
                                    var details = '<br>明细数据：<br>';
                                    details += barData[dataIndex].details.map(item => item.name + ': ' + item.value).join('<br>');
                                    return label + '<br>数据值: ' + value + details;
                                }
                            },
                        };

                        // 使用刚指定的配置项和数据显示图表。
                        myBarChart.setOption(barOption);
                        var barRes = data.country;
                        // 网格数据
                        $("#html_data").empty();
                        $("#html_data").html(barRes.html_data);

                    }
                });
            }

            updateOfferChartData();
        });
    });


    function updatePieChart(newData) {
        // 判断数据是否符合预期格式
        if (isValidDataFormat(newData)) {
            myPieChart.data = newData;
            myPieChart.update();
        } else {
            console.error('Invalid data format');
        }
    }


    // 判断数据是否符合预期格式
    function isValidDataFormat(data) {
        return (
            data &&
            data.labels &&
            Array.isArray(data.labels) &&
            data.datasets &&
            Array.isArray(data.datasets) &&
            data.datasets.length > 0 &&
            data.datasets[0].data &&
            Array.isArray(data.datasets[0].data)
        );
    }
</script>
